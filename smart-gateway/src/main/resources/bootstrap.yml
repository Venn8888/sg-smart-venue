server:
  port: 9900

spring:
  application:
    name: smart-gateway
  main:
    allow-bean-definition-overriding: true
  cloud:
    nacos:
      config:
        shared-configs: common.yml,db-base.yml,redis.yml,rabbitmq.yml

#网关路由配置
spring.cloud.gateway:
  discovery.locator.enabled: true
  routes:
    -   id: web-api-route
        uri: lb://web-middle-api
        predicates:
          -   Path=/middle/**
        filters:
          -   StripPrefix=1
    -   id: mini-app-route
        uri: lb://mini-app-api
        predicates:
          -   Path=/mini-app/**
        filters:
          -   StripPrefix=1
    -   id: oauth2-sso-route
        uri: lb://oauth2-sso-api
        predicates:
          -   Path=/sso/**
        filters:
          -   StripPrefix=1

application:
  # 开放api
  api:
    # 参数签名验证
    check-sign: false
    # 访问权限控制
    access-control: false
    # swagger调试,生产环境设为false
    api-debug: true
    # 始终放行
    permit-all:
      - /*/login/**
      - /*/logout/**
      - /*/oauth/**
      - /actuator/health
      - /actuator/info
      - /sso/login/token
    # 忽略权限鉴定
    authority-ignores:
      - /*/authority/granted/me
      - /*/authority/granted/me/menu
      - /*/current/user/**



